(function(e){"use strict";var t={Defaults:{namespace:"airbox",context:"body",select:"[data-airbox]",targetAttr:"data-airbox",openTrigger:"click",closeTrigger:"click",resetCss:false,open:function(t){e.proxy(e.airbox.methods.open,this,t)()},close:function(t){e.proxy(e.airbox.methods.close,this,t)()}},methods:{abSetup:function(n,r){var i=e(this)||e(),n=e.extend({},t.Defaults,n),s=!n.resetCss?n.namespace:n.namespace+"-reset",o=e('<div class="'+s+'"><div class="'+s+'-content"><span class="'+s+'-close"></span></div></div>'),u={config:n,content:r,$elem:i,$instance:o.clone()};u.$instance.on(n.closeTrigger+"."+n.namespace,e.proxy(n.close,u));if(i.length>0&&this.tagName){i.on(n.openTrigger+"."+n.namespace,e.proxy(n.open,u))}else{e.proxy(n.open,u)()}},getContent:function(){var t=this,n=t.content,r=t.$elem.attr(t.config.targetAttr);if(typeof n==="string"){t.content=e(n)}else if(n instanceof e===false){if(r==="image"||r.match(/\.(png|jpg|jpeg|gif|tiff|bmp)$/i)){var i=r.match(/\.(png|jpg|jpeg|gif|tiff|bmp)$/i)?r:t.$elem.attr("href");t.content=e('<img src="'+i+'" alt="" class="'+t.config.namespace+'-image" />')}else{t.content=e(e(r),t.config.context)}}t.content.addClass(t.config.namespace+"-inner")},open:function(n){if(n){n.preventDefault()}var r=this;e("body").css("overflow","hidden");if(e.proxy(t.methods.getContent,r)()!==false){e(document).bind("keyup."+r.config.namespace,function(e){if(e.keyCode==27){r.$instance.find("."+r.config.namespace+"-close").click()}});r.$instance.prependTo("body").fadeIn(2500).find("."+r.config.namespace+"-close").after(r.content)}},close:function(t){if(t){t.preventDefault()}e("body").css("overflow","auto");var n=this,r=n.config,i=e(t.target);if(i.is("."+r.namespace)||i.is("."+r.namespace+"-close")){e(document).unbind("keyup."+n.config.namespace);n.$instance.fadeOut(function(){n.$instance.detach()})}}}};e.airbox=function(n,r){e.proxy(t.methods.abSetup,null,r,n)()};e.prototype.airbox=function(n,r){e(this).each(function(){e.proxy(t.methods.abSetup,this,n,r)()})};e.extend(e.airbox,t);e(document).ready(function(){var t=e.airbox.Defaults;e(t.select,t.context).airbox()})})(jQuery)